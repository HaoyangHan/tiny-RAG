# TinyRAG v1.4 Frontend Architecture - Complete UI Redesign

## ğŸ¨ **Design Philosophy**

**Vision:** Transform TinyRAG into a modern, project-centric collaborative platform  
**Approach:** Clean, professional interface with intuitive workflows  
**Target:** Researchers, data scientists, and knowledge workers  

---

## ğŸ—ï¸ **Technical Stack**

### **Core Framework**
- **Next.js 14:** App Router with Server/Client Components
- **TypeScript:** Full type safety and developer experience
- **Tailwind CSS:** Utility-first styling with custom design system
- **Shadcn/ui:** High-quality, accessible component library

### **State Management**
- **Zustand:** Lightweight state management for client state
- **TanStack Query:** Server state management and caching
- **React Hook Form:** Form handling with validation

### **UI/UX Libraries**
- **Framer Motion:** Smooth animations and transitions
- **Radix UI:** Unstyled, accessible component primitives
- **Lucide React:** Consistent iconography
- **React DnD:** Drag and drop functionality

### **Development Tools**
- **ESLint + Prettier:** Code quality and formatting
- **Husky:** Git hooks for code quality
- **Playwright:** End-to-end testing
- **Storybook:** Component documentation and testing

---

## ğŸ“ **File Structure**

```
rag-memo-ui/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                          # Next.js 14 App Router
â”‚   â”‚   â”œâ”€â”€ (auth)/                   # Authentication routes group
â”‚   â”‚   â”‚   â”œâ”€â”€ login/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ register/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ forgot-password/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”‚   â””â”€â”€ layout.tsx            # Auth layout with center-aligned forms
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ (dashboard)/              # Main application routes group
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx          # User dashboard overview
â”‚   â”‚   â”‚   â”œâ”€â”€ projects/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx          # Projects list with filters
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ new/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx      # Project creation wizard
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ [projectId]/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ page.tsx      # Project overview dashboard
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ documents/
â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ page.tsx  # Document management
â”‚   â”‚   â”‚   â”‚       â”‚   â””â”€â”€ upload/
â”‚   â”‚   â”‚   â”‚       â”‚       â””â”€â”€ page.tsx # Document upload interface
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ generate/
â”‚   â”‚   â”‚   â”‚       â”‚   â””â”€â”€ page.tsx  # RAG generation interface
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ history/
â”‚   â”‚   â”‚   â”‚       â”‚   â””â”€â”€ page.tsx  # Generation history
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ analytics/
â”‚   â”‚   â”‚   â”‚       â”‚   â””â”€â”€ page.tsx  # Project analytics
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ collaborators/
â”‚   â”‚   â”‚   â”‚       â”‚   â””â”€â”€ page.tsx  # Team management
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ settings/
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ page.tsx  # Project settings
â”‚   â”‚   â”‚   â”œâ”€â”€ profile/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx          # User profile settings
â”‚   â”‚   â”‚   â””â”€â”€ layout.tsx            # Dashboard layout with sidebar
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ landing/
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx              # Landing page for new users
â”‚   â”‚   â”œâ”€â”€ globals.css               # Global styles and CSS variables
â”‚   â”‚   â”œâ”€â”€ layout.tsx                # Root layout with providers
â”‚   â”‚   â””â”€â”€ page.tsx                  # Root redirect to dashboard
â”‚   â”‚
â”‚   â”œâ”€â”€ components/                   # Reusable UI components
â”‚   â”‚   â”œâ”€â”€ ui/                       # Base UI components (shadcn/ui)
â”‚   â”‚   â”‚   â”œâ”€â”€ button.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ input.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ dialog.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ dropdown-menu.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ form.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ table.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ auth/                     # Authentication components
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginForm.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ RegisterForm.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ForgotPasswordForm.tsx
â”‚   â”‚   â”‚   â””â”€â”€ AuthGuard.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ layout/                   # Layout components
â”‚   â”‚   â”‚   â”œâ”€â”€ Header.tsx            # Top navigation
â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx           # Left navigation
â”‚   â”‚   â”‚   â”œâ”€â”€ MobileNav.tsx         # Mobile navigation
â”‚   â”‚   â”‚   â”œâ”€â”€ Breadcrumb.tsx        # Navigation breadcrumbs
â”‚   â”‚   â”‚   â””â”€â”€ Footer.tsx            # Page footer
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ project/                  # Project-related components
â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectCard.tsx       # Project preview card
â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectList.tsx       # Projects grid/list view
â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectCreationWizard.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectSettings.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectAnalytics.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ProjectCollaborators.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ document/                 # Document management components
â”‚   â”‚   â”‚   â”œâ”€â”€ DocumentUpload.tsx    # Drag & drop upload
â”‚   â”‚   â”‚   â”œâ”€â”€ DocumentList.tsx      # Document grid/table
â”‚   â”‚   â”‚   â”œâ”€â”€ DocumentCard.tsx      # Document preview card
â”‚   â”‚   â”‚   â”œâ”€â”€ DocumentViewer.tsx    # Document content viewer
â”‚   â”‚   â”‚   â”œâ”€â”€ DocumentFilters.tsx   # Advanced filtering
â”‚   â”‚   â”‚   â””â”€â”€ DocumentBulkActions.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ generation/               # RAG generation components
â”‚   â”‚   â”‚   â”œâ”€â”€ GenerationInterface.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ QueryInput.tsx        # Smart query input
â”‚   â”‚   â”‚   â”œâ”€â”€ DocumentSelector.tsx  # Document selection
â”‚   â”‚   â”‚   â”œâ”€â”€ GenerationSettings.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ GenerationHistory.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ GenerationResult.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ExportOptions.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ common/                   # Common utility components
â”‚   â”‚   â”‚   â”œâ”€â”€ LoadingSpinner.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ErrorBoundary.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ EmptyState.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ConfirmDialog.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ SearchInput.tsx
â”‚   â”‚   â”‚   â””â”€â”€ DataTable.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ charts/                   # Analytics and visualization
â”‚   â”‚       â”œâ”€â”€ UsageChart.tsx
â”‚   â”‚       â”œâ”€â”€ PerformanceMetrics.tsx
â”‚   â”‚       â””â”€â”€ ActivityTimeline.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/                          # Utility libraries
â”‚   â”‚   â”œâ”€â”€ api.ts                    # API client configuration
â”‚   â”‚   â”œâ”€â”€ auth.ts                   # Authentication utilities
â”‚   â”‚   â”œâ”€â”€ utils.ts                  # General utilities
â”‚   â”‚   â”œâ”€â”€ validations.ts            # Form validation schemas
â”‚   â”‚   â”œâ”€â”€ constants.ts              # Application constants
â”‚   â”‚   â””â”€â”€ types.ts                  # Shared TypeScript types
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/                        # Custom React hooks
â”‚   â”‚   â”œâ”€â”€ useAuth.ts                # Authentication state
â”‚   â”‚   â”œâ”€â”€ useProjects.ts            # Project management
â”‚   â”‚   â”œâ”€â”€ useDocuments.ts           # Document operations
â”‚   â”‚   â”œâ”€â”€ useGeneration.ts          # RAG generation
â”‚   â”‚   â”œâ”€â”€ useLocalStorage.ts        # Local storage utilities
â”‚   â”‚   â””â”€â”€ useDebounce.ts            # Debounced values
â”‚   â”‚
â”‚   â”œâ”€â”€ store/                        # State management
â”‚   â”‚   â”œâ”€â”€ authStore.ts              # Authentication state
â”‚   â”‚   â”œâ”€â”€ projectStore.ts           # Project state
â”‚   â”‚   â”œâ”€â”€ documentStore.ts          # Document state
â”‚   â”‚   â”œâ”€â”€ generationStore.ts        # Generation state
â”‚   â”‚   â””â”€â”€ uiStore.ts                # UI state (sidebar, modals)
â”‚   â”‚
â”‚   â”œâ”€â”€ styles/                       # Styling
â”‚   â”‚   â”œâ”€â”€ globals.css               # Global styles
â”‚   â”‚   â”œâ”€â”€ components.css            # Component-specific styles
â”‚   â”‚   â””â”€â”€ animations.css            # Animation definitions
â”‚   â”‚
â”‚   â””â”€â”€ types/                        # TypeScript type definitions
â”‚       â”œâ”€â”€ api.ts                    # API response types
â”‚       â”œâ”€â”€ project.ts                # Project-related types
â”‚       â”œâ”€â”€ document.ts               # Document types
â”‚       â”œâ”€â”€ generation.ts             # Generation types
â”‚       â””â”€â”€ user.ts                   # User types
â”‚
â”œâ”€â”€ public/                           # Static assets
â”‚   â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ icons/
â”‚   â””â”€â”€ favicon.ico
â”‚
â”œâ”€â”€ docs/                             # Component documentation
â”‚   â””â”€â”€ components/                   # Storybook stories
â”‚
â”œâ”€â”€ tests/                            # Test files
â”‚   â”œâ”€â”€ e2e/                          # End-to-end tests
â”‚   â”œâ”€â”€ components/                   # Component tests
â”‚   â””â”€â”€ utils/                        # Utility tests
â”‚
â”œâ”€â”€ .storybook/                       # Storybook configuration
â”œâ”€â”€ tailwind.config.js                # Tailwind CSS config
â”œâ”€â”€ next.config.js                    # Next.js configuration
â”œâ”€â”€ tsconfig.json                     # TypeScript configuration
â”œâ”€â”€ package.json                      # Dependencies and scripts
â””â”€â”€ README.md                         # Frontend documentation
```

---

## ğŸ¨ **Design System**

### **Color Palette**
```css
:root {
  /* Primary Colors */
  --primary-50: #eff6ff;
  --primary-100: #dbeafe;
  --primary-500: #3b82f6;
  --primary-600: #2563eb;
  --primary-700: #1d4ed8;
  
  /* Semantic Colors */
  --success-500: #10b981;
  --warning-500: #f59e0b;
  --error-500: #ef4444;
  --info-500: #06b6d4;
  
  /* Neutral Colors */
  --gray-50: #f9fafb;
  --gray-100: #f3f4f6;
  --gray-200: #e5e7eb;
  --gray-300: #d1d5db;
  --gray-400: #9ca3af;
  --gray-500: #6b7280;
  --gray-600: #4b5563;
  --gray-700: #374151;
  --gray-800: #1f2937;
  --gray-900: #111827;
}
```

### **Typography Scale**
```css
/* Font Sizes */
.text-xs { font-size: 0.75rem; }    /* 12px */
.text-sm { font-size: 0.875rem; }   /* 14px */
.text-base { font-size: 1rem; }     /* 16px */
.text-lg { font-size: 1.125rem; }   /* 18px */
.text-xl { font-size: 1.25rem; }    /* 20px */
.text-2xl { font-size: 1.5rem; }    /* 24px */
.text-3xl { font-size: 1.875rem; }  /* 30px */
.text-4xl { font-size: 2.25rem; }   /* 36px */

/* Font Weights */
.font-light { font-weight: 300; }
.font-normal { font-weight: 400; }
.font-medium { font-weight: 500; }
.font-semibold { font-weight: 600; }
.font-bold { font-weight: 700; }
```

### **Spacing System**
```css
/* Spacing Scale (rem) */
.space-1 { margin/padding: 0.25rem; }  /* 4px */
.space-2 { margin/padding: 0.5rem; }   /* 8px */
.space-3 { margin/padding: 0.75rem; }  /* 12px */
.space-4 { margin/padding: 1rem; }     /* 16px */
.space-6 { margin/padding: 1.5rem; }   /* 24px */
.space-8 { margin/padding: 2rem; }     /* 32px */
.space-12 { margin/padding: 3rem; }    /* 48px */
.space-16 { margin/padding: 4rem; }    /* 64px */
```

---

## ğŸ–¼ï¸ **Page Designs**

### **1. Landing Page (`/landing`)**
```typescript
interface LandingPageProps {
  heroSection: {
    title: string;
    subtitle: string;
    ctaButton: { text: string; href: string };
    demoButton: { text: string; href: string };
    backgroundImage: string;
  };
  
  features: Array<{
    icon: React.ComponentType;
    title: string;
    description: string;
    benefits: string[];
  }>;
  
  testimonials: Array<{
    name: string;
    role: string;
    company: string;
    content: string;
    avatar: string;
  }>;
  
  pricingPlans: Array<{
    name: string;
    price: string;
    features: string[];
    recommended?: boolean;
  }>;
}

// Layout Structure:
// 1. Navigation Bar (sticky)
// 2. Hero Section (full viewport)
// 3. Features Section (3-column grid)
// 4. How It Works (step-by-step)
// 5. Testimonials (carousel)
// 6. Pricing (comparison table)
// 7. CTA Section
// 8. Footer
```

### **2. Dashboard Layout (`/dashboard`)**
```typescript
interface DashboardLayoutProps {
  sidebar: {
    navigation: NavigationItem[];
    userProfile: UserProfile;
    notifications: NotificationBadge[];
  };
  
  header: {
    breadcrumbs: BreadcrumbItem[];
    search: SearchConfig;
    userMenu: UserMenuItems[];
  };
  
  main: {
    content: React.ReactNode;
    rightPanel?: React.ReactNode;
  };
}

// Layout Structure:
// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚                    Header (64px)                        â”‚
// â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
// â”‚   Sidebar   â”‚              Main Content                 â”‚
// â”‚   (256px)   â”‚                                          â”‚
// â”‚             â”‚                                          â”‚
// â”‚             â”‚                                          â”‚
// â”‚             â”‚                                          â”‚
// â”‚             â”‚                                          â”‚
// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **3. Project Creation (`/projects/new`)**
```typescript
interface ProjectCreationWizardProps {
  steps: Array<{
    id: string;
    title: string;
    description: string;
    component: React.ComponentType;
    validation: ValidationSchema;
  }>;
  
  currentStep: number;
  formData: ProjectFormData;
  onNext: (data: Partial<ProjectFormData>) => void;
  onPrevious: () => void;
  onSubmit: (data: ProjectFormData) => void;
}

// Wizard Steps:
// 1. Basic Information (name, description)
// 2. Keywords & Tags (auto-suggestions)
// 3. RAG Configuration (model, settings)
// 4. Privacy & Sharing (visibility, collaborators)
// 5. Review & Create (summary, confirmation)
```

### **4. Document Management (`/projects/[id]/documents`)**
```typescript
interface DocumentManagementProps {
  documents: DocumentWithMetadata[];
  
  filters: {
    search: string;
    type: DocumentType[];
    status: DocumentStatus[];
    dateRange: DateRange;
    tags: string[];
    priority: number[];
  };
  
  view: 'grid' | 'list' | 'table';
  
  selection: {
    selectedIds: string[];
    bulkActions: BulkAction[];
  };
  
  upload: {
    dragActive: boolean;
    uploading: UploadProgress[];
    queue: File[];
  };
}

// Layout Structure:
// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚  Filters Bar + View Toggle + Bulk Actions              â”‚
// â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
// â”‚                                                         â”‚
// â”‚  Upload Zone (drag & drop)                             â”‚
// â”‚                                                         â”‚
// â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
// â”‚                                                         â”‚
// â”‚  Documents Grid/List/Table                             â”‚
// â”‚  (with infinite scroll)                                â”‚
// â”‚                                                         â”‚
// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **5. RAG Generation (`/projects/[id]/generate`)**
```typescript
interface GenerationInterfaceProps {
  conversation: {
    messages: Message[];
    activeGeneration: GenerationStatus;
  };
  
  input: {
    query: string;
    suggestions: QuerySuggestion[];
    selectedDocuments: string[];
  };
  
  settings: {
    model: string;
    temperature: number;
    maxTokens: number;
    context: ContextSettings;
  };
  
  sidebar: {
    documentSelector: DocumentSelectorProps;
    history: GenerationHistory[];
    templates: QueryTemplate[];
  };
}

// Layout Structure:
// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚                 Chat Interface                          â”‚
// â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
// â”‚  â”‚  Message History (scrollable)                   â”‚   â”‚
// â”‚  â”‚  - User queries                                 â”‚   â”‚
// â”‚  â”‚  - AI responses with citations                  â”‚   â”‚
// â”‚  â”‚  - Generation status indicators                 â”‚   â”‚
// â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
// â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
// â”‚  â”‚  Query Input + Document Selection + Settings    â”‚   â”‚
// â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ **Component Architecture**

### **Component Categories**

#### **1. Base Components (ui/)**
- Fundamental building blocks
- Styled with Tailwind CSS
- Fully accessible (ARIA compliant)
- Consistent with design system
- Example: Button, Input, Dialog, etc.

#### **2. Composite Components**
- Combine multiple base components
- Handle complex interactions
- Manage local state
- Example: DataTable, FileUpload, etc.

#### **3. Feature Components**
- Domain-specific functionality
- Connect to global state
- Handle API interactions
- Example: ProjectCard, GenerationInterface, etc.

#### **4. Layout Components**
- Structure and navigation
- Responsive design
- Route-aware highlighting
- Example: Sidebar, Header, etc.

### **Component Patterns**

#### **Compound Components**
```typescript
// Example: DocumentUpload compound component
<DocumentUpload>
  <DocumentUpload.DropZone />
  <DocumentUpload.FileList />
  <DocumentUpload.ProgressBar />
  <DocumentUpload.Actions />
</DocumentUpload>
```

#### **Render Props Pattern**
```typescript
// Example: Data fetching with render props
<ProjectData projectId={id}>
  {({ project, loading, error }) => (
    loading ? <LoadingSpinner /> :
    error ? <ErrorMessage error={error} /> :
    <ProjectDashboard project={project} />
  )}
</ProjectData>
```

#### **Custom Hooks Pattern**
```typescript
// Example: Project management hook
const useProject = (projectId: string) => {
  const [project, setProject] = useState<Project | null>(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<Error | null>(null);
  
  // ... implementation
  
  return {
    project,
    loading,
    error,
    updateProject,
    deleteProject,
    addDocument,
    removeDocument,
  };
};
```

---

## ğŸ“± **Responsive Design**

### **Breakpoints**
```css
/* Mobile First Approach */
.container {
  /* Mobile: 320px - 768px */
  padding: 1rem;
}

@media (min-width: 768px) {
  /* Tablet: 768px - 1024px */
  .container {
    padding: 2rem;
    max-width: 768px;
    margin: 0 auto;
  }
}

@media (min-width: 1024px) {
  /* Desktop: 1024px+ */
  .container {
    max-width: 1024px;
    padding: 3rem;
  }
}

@media (min-width: 1280px) {
  /* Large Desktop: 1280px+ */
  .container {
    max-width: 1280px;
  }
}
```

### **Mobile Adaptations**
- **Navigation:** Collapsible hamburger menu
- **Tables:** Horizontal scroll or card view
- **Modals:** Full-screen on mobile
- **Forms:** Single column layout
- **Upload:** Touch-friendly drag zones

---

## âš¡ **Performance Optimizations**

### **Code Splitting**
```typescript
// Route-based code splitting
const ProjectDashboard = lazy(() => import('./pages/ProjectDashboard'));
const DocumentManagement = lazy(() => import('./pages/DocumentManagement'));
const GenerationInterface = lazy(() => import('./pages/GenerationInterface'));

// Component-based code splitting
const HeavyChart = lazy(() => import('./components/HeavyChart'));
```

### **Image Optimization**
```typescript
// Next.js Image component with optimization
import Image from 'next/image';

<Image
  src="/project-thumbnail.jpg"
  alt="Project thumbnail"
  width={400}
  height={300}
  placeholder="blur"
  blurDataURL="data:image/jpeg;base64,..."
  priority={false}
  loading="lazy"
/>
```

### **Data Fetching**
```typescript
// TanStack Query for efficient data fetching
const useProjectsQuery = () => {
  return useQuery({
    queryKey: ['projects'],
    queryFn: fetchProjects,
    staleTime: 5 * 60 * 1000, // 5 minutes
    cacheTime: 10 * 60 * 1000, // 10 minutes
    refetchOnWindowFocus: false,
  });
};
```

---

## ğŸ”’ **Security Considerations**

### **Authentication**
- JWT token storage in httpOnly cookies
- Automatic token refresh
- Route protection with middleware
- Role-based access control

### **Data Validation**
- Client-side validation with Zod
- Server-side validation verification
- XSS prevention with DOMPurify
- CSRF protection

### **API Security**
- Request/response encryption
- Rate limiting per user
- Input sanitization
- Error message sanitization

---

## ğŸ§ª **Testing Strategy**

### **Unit Testing**
```typescript
// Component testing with React Testing Library
import { render, screen, fireEvent } from '@testing-library/react';
import { ProjectCard } from './ProjectCard';

test('renders project card with correct information', () => {
  const project = {
    id: '1',
    name: 'Test Project',
    description: 'Test description',
    documentCount: 5,
  };
  
  render(<ProjectCard project={project} />);
  
  expect(screen.getByText('Test Project')).toBeInTheDocument();
  expect(screen.getByText('5 documents')).toBeInTheDocument();
});
```

### **Integration Testing**
```typescript
// API integration testing
import { render, screen, waitFor } from '@testing-library/react';
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
import { ProjectList } from './ProjectList';

test('loads and displays projects', async () => {
  const queryClient = new QueryClient();
  
  render(
    <QueryClientProvider client={queryClient}>
      <ProjectList />
    </QueryClientProvider>
  );
  
  await waitFor(() => {
    expect(screen.getByText('My First Project')).toBeInTheDocument();
  });
});
```

### **E2E Testing**
```typescript
// Playwright end-to-end testing
import { test, expect } from '@playwright/test';

test('complete project creation flow', async ({ page }) => {
  await page.goto('/projects/new');
  
  await page.fill('input[name="name"]', 'Test Project');
  await page.fill('textarea[name="description"]', 'Test description');
  await page.click('button[type="submit"]');
  
  await expect(page).toHaveURL(/\/projects\/\w+/);
  await expect(page.locator('h1')).toContainText('Test Project');
});
```

---

## ğŸš€ **Deployment & DevOps**

### **Build Configuration**
```javascript
// next.config.js
const nextConfig = {
  output: 'standalone',
  images: {
    domains: ['api.tinyrag.com'],
    formats: ['image/webp', 'image/avif'],
  },
  experimental: {
    optimizeCss: true,
    optimizePackageImports: ['lucide-react'],
  },
  env: {
    NEXT_PUBLIC_API_URL: process.env.NEXT_PUBLIC_API_URL,
  },
};
```

### **Docker Configuration**
```dockerfile
# Dockerfile
FROM node:18-alpine AS builder
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production

COPY . .
RUN npm run build

FROM node:18-alpine AS runner
WORKDIR /app
COPY --from=builder /app/.next/standalone ./
COPY --from=builder /app/public ./public

EXPOSE 3000
CMD ["node", "server.js"]
```

---

*This architecture provides a solid foundation for building a modern, scalable, and maintainable frontend for TinyRAG v1.4, focusing on user experience, performance, and developer productivity.* 